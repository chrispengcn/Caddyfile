# Space-separated list of all domains to proxy
hearingaid.shopym.com medicalequipment.com.cn www.medicalequipment.com.cn {
    # Configure HTTPS certificate (fill in your email for certificate notifications)
    tls your-email@example.com  # Replace with your actual email

    # Reverse proxy to backend service
    reverse_proxy http://172.18.0.1:8080

    # Enable compression to improve performance
    encode gzip zstd

    # Error handling configuration
    handle_errors {
        # Custom response for 404 errors
        @404 {
            expression int({http.error.status_code}) == 404
        }
        respond @404 "Page Not Found (404 Error)"

        # Default response for other errors
        respond "Server Error: {http.error.status_code}"
    }

    # WebSocket support (if backend service requires WebSocket)
    @ws {
        header Connection Upgrade
        header Upgrade websocket
    }
    reverse_proxy @ws http://172.18.0.1:8080  # Proxy WebSocket requests to backend

    # Security headers configuration
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains"
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
    }
}

# HTTP auto-redirect to HTTPS
:80 {
    redir https://{host}{uri} permanent
}
